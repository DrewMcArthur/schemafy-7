language: Rust
cache: cargo
sudo: false
rust:
- nightly
- beta
- stable
before_script:
- export PATH=$HOME/.cargo/bin:$PATH
- type rustfmt || (rustup install nightly && cargo +nightly install rustfmt-nightly)
script:
- |
  cargo build &&
    cargo test
env:
  global:
  - RUST_BACKTRACE=1
